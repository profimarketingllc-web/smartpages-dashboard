# SmartPages

SmartPages ist eine **Static-Site-Generation (SSG)**-basierte Plattform (kein SSR), die ein performantes, sicheres und skalierbares SaaS-System fÃ¼r Profile, Pages, Domains und Links bereitstellt. Die gesamte Anwendung basiert auf **statisch ausgelieferten Frontends**, die Ã¼ber ein **Worker-System** dynamisch mit Authentifizierung, Abrechnung und Zugriffskontrolle verbunden sind.

SmartPages besteht aus drei Hauptbereichen:

1. **Frontend** â€“ Dashboard & Login (Astro, statisch)
2. **Worker-System** â€“ Backend-Logik (Auth, Billing, Mail, Domains)
3. **Homepage** â€“ Marketing-Seite (HubSpot-hosted)

---

## Frontend

Das Frontend wird vollstÃ¤ndig statisch mit **Astro (SSG)** gebaut. Es gibt **keine SSR-AbhÃ¤ngigkeit**.

Eigenschaften:
- extrem schnelle Ladezeiten
- minimale AngriffsflÃ¤che
- klare Trennung von UI und Business-Logik
- i18n direkt im Build

Das Frontend konsumiert ausschlieÃŸlich APIs der Worker.

---

## Worker-System

Das Worker-System bildet das Backend von SmartPages und ist vollstÃ¤ndig entkoppelt vom Frontend. Es besteht aus mehreren spezialisierten Workern, die jeweils klar abgegrenzte Aufgaben Ã¼bernehmen.

### Zentrale Komponenten

- **Core Worker** â€“ Authentifizierung, Sessions, UserInfo, zentrale Systemlogik
- **Customer Worker** â€“ Verwaltung kundenbezogener Daten
- **Mailer Worker** â€“ Versand transaktionaler E-Mails (z.â€¯B. Magic Links)
- **Billing Worker** â€“ Verwaltung von Abos, PlÃ¤nen und Zahlungsstatus
- **Domain Worker** â€“ Auslieferung generierter Seiten aus R2-Buckets

### ğŸ” Guard-Funktion (Access Control)

Der **Core Worker** enthÃ¤lt eine zentrale **Guard-Funktion**, die fÃ¼r die Zugriffskontrolle auf Produkte, Features und Seiten verantwortlich ist.

Die Guard-Funktion bewertet auf Basis der **UserInfo** (inkl. Abostatus aus dem Billing Worker), welche Produkte und Funktionen ein Benutzer nutzen darf.

Das Ergebnis dieser Bewertung wird in der UserInfo gespeichert und vom Frontend genutzt, um:
- ProductGrids zu filtern
- Navigation zu steuern
- Feature-Seiten zuzulassen oder auf Upsell-Seiten umzuleiten

Die Zugriffskontrolle erfolgt **zentral im Core Worker**, nicht im Frontend.

---

## Homepage (Marketing)

Die Ã¶ffentliche Homepage wird **nicht** Ã¼ber Astro ausgeliefert, sondern Ã¼ber **HubSpot**.

Aufgaben:
- Produktdarstellung
- Marketing & SEO
- Lead-Generierung

Die Homepage ist technisch vollstÃ¤ndig vom Dashboard und Worker-System getrennt.

