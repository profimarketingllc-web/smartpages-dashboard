---
import { t } from "~/utils/i18n/i18n";

// ğŸŒ Sprache (Fallback = en)
const lang = "en";

// ğŸ“ Aktueller Pfad (fÃ¼r Active-State)
const currentPath = Astro.url.pathname;

// ğŸ§­ Navigation (i18n keys!)
const navItems = [
  { key: "Cockpit", icon: "ğŸ›«", path: "/dashboard" },
  { key: "SmartProfile", icon: "ğŸ‘¤", path: "/smartprofile" },
  { key: "SmartPage", icon: "ğŸ“„", path: "/smartpage" },
  { key: "SmartDomain", icon: "ğŸŒ", path: "/smartdomain" },
  { key: "SmartLinks", icon: "ğŸ”—", path: "/smartlinks" },
];
---

<aside
  id="sidebar"
  class="fixed top-0 left-0 h-screen w-64 bg-[#1E2A45] text-white shadow-xl
         flex flex-col justify-between transition-transform duration-300 ease-in-out
         -translate-x-full md:translate-x-0 z-50"
>
  <!-- ğŸ”¸ Header -->
  <div class="h-20 flex items-center justify-center border-b border-white/10 shrink-0">
    <h2 class="text-xl font-extrabold tracking-wide text-[#F5B400]">
      SmartCenter
    </h2>
  </div>

  <!-- ğŸ”¸ Navigation -->
  <nav class="flex-1 mt-8 space-y-3 overflow-y-auto scrollbar-hide px-3 pb-4">
    {navItems.map((item) => {
      const isActive = currentPath.startsWith(item.path);

      return (
        <a
          href={item.path}
          class={`flex items-center gap-3 px-5 py-3 rounded-2xl text-sm font-medium
                  transition-all duration-300 shadow-md
                  ${
                    isActive
                      ? "bg-gradient-to-r from-[#F5B400] to-[#E47E00] text-white"
                      : "bg-[#f6f8fb] text-[#1E2A45] hover:bg-gradient-to-r hover:from-[#4F6EF7] hover:to-[#6A7CFF] hover:text-white"
                  }`}
        >
          <span class="text-lg">{item.icon}</span>
          <span>{t(lang, "sidebar", "nav", item.key)}</span>
        </a>
      );
    })}
  </nav>

  <!-- ğŸ”¹ Trennlinie -->
  <hr class="border-t border-white/20 mx-4 my-3" />

  <!-- ğŸ”¹ Footer -->
  <div class="p-4 space-y-3">
    <!-- ğŸ’³ Abo -->
    <a
      href="/billing"
      class="flex items-center gap-3 px-5 py-3 rounded-2xl text-sm font-medium
             bg-[#f6f8fb] text-[#1E2A45]
             hover:bg-gradient-to-r hover:from-[#C0C0C0] hover:to-[#E0E0E0]
             transition-all shadow-md"
    >
      <span class="text-lg">ğŸ’³</span>
      <span>{t(lang, "sidebar", "footer", "billing")}</span>
    </a>

    <!-- ğŸ’¬ Support -->
    <a
      href="mailto:support@smartpages.online"
      class="block w-full text-center rounded-2xl py-3 font-medium
             bg-white text-[#1E2A45] border border-[#4F6EF7]
             hover:bg-[#4F6EF7] hover:text-white
             transition-all shadow-md"
    >
      {t(lang, "sidebar", "footer", "support")}
    </a>
  </div>
</aside>

<!-- ğŸ”¹ Mobile Overlay -->
<div
  id="overlay"
  class="fixed inset-0 bg-black/40 backdrop-blur-sm z-40 hidden md:hidden"
></div>

<!-- ğŸ”¹ Toggle Button -->
<button
  id="openSidebar"
  class="md:hidden fixed top-4 left-4 bg-[#1E2A45] text-white p-2 rounded-xl shadow-lg z-50"
>
  â˜°
</button>

<script>
  const sidebar = document.getElementById("sidebar");
  const overlay = document.getElementById("overlay");
  const openBtn = document.getElementById("openSidebar");

  const toggleSidebar = () => {
    const isHidden = sidebar.classList.contains("-translate-x-full");
    sidebar.classList.toggle("-translate-x-full", !isHidden);
    overlay.classList.toggle("hidden", !isHidden);
  };

  openBtn?.addEventListener("click", toggleSidebar);
  overlay?.addEventListener("click", toggleSidebar);
</script>
