---
import { t, useLang } from "~/utils/i18n/i18n";

// ğŸŒ Sprache bewusst setzen (Fallback: en)
const lang = useLang();

// ğŸ”¹ Navigation (sprachneutraler Pfad!)
const navItems = [
  {
    key: "dashboard",
    icon: "ğŸ›«",
    path: "/dashboard",
    color:
      "hover:from-[#F5B400] hover:to-[#E47E00] hover:shadow-[0_0_20px_rgba(245,180,0,0.4)]",
  },
  {
    key: "smartprofile",
    icon: "ğŸ‘¤",
    path: "/smartprofile",
    color:
      "hover:from-[#4E6BFF] hover:to-[#657AFF] hover:shadow-[0_0_20px_rgba(78,107,255,0.4)]",
  },
  {
    key: "smartpage",
    icon: "ğŸ“„",
    path: "/smartpage",
    color:
      "hover:from-[#F5B400] hover:to-[#E47E00] hover:shadow-[0_0_20px_rgba(245,180,0,0.4)]",
  },
  {
    key: "smartdomain",
    icon: "ğŸŒ",
    path: "/smartdomain",
    color:
      "hover:from-[#8B5CFF] hover:to-[#A076FF] hover:shadow-[0_0_20px_rgba(139,92,255,0.4)]",
  },
  {
    key: "smartlinks",
    icon: "ğŸ”—",
    path: "/smartlinks",
    color:
      "hover:from-[#A8D5BA] hover:to-[#91C7A0] hover:shadow-[0_0_20px_rgba(168,213,186,0.4)]",
  },
];

// ğŸ”¹ Footer / Management
const billingLabel = t(lang, "dashboard", "sidebar", "billing");
const supportLabel = t(lang, "dashboard", "sidebar", "support");
---

<aside
  id="sidebar"
  class="fixed top-0 left-0 h-screen w-64 bg-[#1E2A45] text-white shadow-xl
         flex flex-col justify-between transition-transform duration-300
         ease-in-out -translate-x-full md:translate-x-0 z-50"
>
  <!-- ğŸ”¸ Header -->
  <div class="h-20 flex items-center justify-center border-b border-white/10 shrink-0">
    <h2 class="text-xl font-extrabold tracking-wide text-[#F5B400] drop-shadow">
      SmartCenter
    </h2>
  </div>

  <!-- ğŸ”¸ Navigation -->
  <nav class="flex-1 mt-8 space-y-3 overflow-y-auto scrollbar-hide px-3 pb-4">
    {navItems.map((item) => (
      <a
        href={item.path}
        class={`flex items-center gap-3 px-5 py-3 rounded-2xl text-sm font-medium
                bg-[#f6f8fb] text-[#1E2A45]
                hover:bg-gradient-to-r hover:text-white
                transition-all duration-300 shadow-md
                ${item.color}`}
      >
        <span class="text-lg">{item.icon}</span>
        <span>{t(lang, "dashboard", "sidebar", item.key)}</span>
      </a>
    ))}
  </nav>

  <!-- ğŸ”¹ Divider -->
  <hr class="border-t-2 border-white/20 mx-4 my-4" />

  <!-- ğŸ”¹ Bottom Actions -->
  <div class="p-4 bg-[#1E2A45]/95 backdrop-blur-sm space-y-3">
    <!-- ğŸ’³ Billing -->
    <a
      href="/billing"
      class="flex items-center gap-3 px-5 py-3 rounded-2xl text-sm font-medium
             bg-[#f6f8fb] text-[#1E2A45]
             hover:bg-gradient-to-r hover:from-[#4E6BFF] hover:to-[#657AFF]
             hover:text-white transition-all duration-300 shadow-md"
    >
      <span class="text-lg">ğŸ’³</span>
      <span>{billingLabel}</span>
    </a>

    <!-- ğŸ’¬ Support -->
    <a
      href="mailto:support@smartpages.online"
      class="block w-full text-center rounded-2xl py-3 font-medium
             bg-white text-[#1E2A45] border border-[#4F6EF7]
             hover:bg-[#4F6EF7] hover:text-white
             transition-all duration-300 shadow-md"
    >
      {supportLabel}
    </a>
  </div>
</aside>

<!-- ğŸ”¹ Overlay (Mobile) -->
<div
  id="overlay"
  class="fixed inset-0 bg-black/40 backdrop-blur-sm z-40 hidden md:hidden"
></div>

<!-- ğŸ”¹ Toggle Button -->
<button
  id="openSidebar"
  class="md:hidden fixed top-4 left-4 bg-[#1E2A45] text-white
         p-2 rounded-xl shadow-lg z-50"
>
  â˜°
</button>

<script>
  const sidebar = document.getElementById("sidebar");
  const overlay = document.getElementById("overlay");
  const openBtn = document.getElementById("openSidebar");

  const toggleSidebar = () => {
    const hidden = sidebar.classList.contains("-translate-x-full");
    sidebar.classList.toggle("-translate-x-full", !hidden);
    overlay.classList.toggle("hidden", !hidden);
  };

  openBtn?.addEventListener("click", toggleSidebar);
  overlay?.addEventListener("click", toggleSidebar);
</script>

<style>
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
</style>
