---
/**
 * ProductGrid.astro – FINAL (Static + Auth-aware)
 * -----------------------------------------------
 * ✔ Design unverändert
 * ✔ Farben aus global.css
 * ✔ Funktioniert für Login, Public & Dashboard
 * ✔ Product-Fencing vorbereitet
 * ✔ Keine Server-Abhängigkeit
 */

import ProductCard from "./ProductCard.astro";

const {
  lang = "de",
  upsell = null, // Dashboard-Upsell (optional)
} = Astro.props;

/* -------------------------------------------------- */
/* Fallback-Texte (Public / Login)                    */
/* -------------------------------------------------- */
const teaser = {
  de: {
    smartprofile:
      "Dein professionelles Online-Profil – sicher, sichtbar und DSGVO-konform.",
    smartpage:
      "Conversion-starke Seiten in Minuten – ganz ohne Programmierung.",
    smartdomain:
      "Eigene Domain, SSL & Datenschutz – alles aus einer Hand.",
    smartlinks:
      "Datenschutzfreundliche Kurzlinks mit Analyse-Fokus.",
  },
  en: {
    smartprofile:
      "Your professional online profile – secure, visible and GDPR-compliant.",
    smartpage:
      "High-converting pages in minutes – no coding required.",
    smartdomain:
      "Own domain, SSL & privacy – all in one.",
    smartlinks:
      "Privacy-friendly short links with analytics focus.",
  },
};

const t = teaser[lang] ?? teaser.de;

/* -------------------------------------------------- */
/* Content-Auflösung                                  */
/* -------------------------------------------------- */
const content = {
  smartprofile: upsell?.smartprofile ?? {
    title: "SmartProfile",
    text: t.smartprofile,
  },
  smartpage: upsell?.smartpage ?? {
    title: "SmartPage",
    text: t.smartpage,
  },
  smartdomain: upsell?.smartdomain ?? {
    title: "SmartDomain",
    text: t.smartdomain,
  },
  smartlinks: upsell?.smartlinks ?? {
    title: "SmartLinks",
    text: t.smartlinks,
  },
};
---

<section
  id="product-grid"
  class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-6 px-4 py-6"
>
  <ProductCard
    title={content.smartprofile.title}
    text={content.smartprofile.text}
    gradient="from-[var(--gradient-smartprofile-from)] to-[var(--gradient-smartprofile-to)]"
    glow="smart-glow-blue"
    action="/features/smartprofile"
    data-product="smartprofile"
  />

  <ProductCard
    title={content.smart
