---
/**
 * ProductGrid.astro â€“ Premium Harmony Edition (Mehrsprachig, Build-sicher)
 * ------------------------------------------------------------------------
 * âœ“ Sprachlogik Ã¼ber Props (de/en)
 * âœ“ GleichmÃ¤ÃŸige HÃ¶he der ProductCards
 * âœ“ Sanftes Fade-In beim Laden
 * âœ“ Kompaktmodus fÃ¼r Login-/Landingpages (optional)
 * âœ“ Kompatibel mit DashboardCard & SSR
 */

import ProductCard from "./ProductCard.astro";

// Aktuelle URL analysieren (Fallback)
const currentPath = Astro.url.pathname.toLowerCase();
const detectedLang = currentPath.includes("/en/") ? "en" : "de";

// Props einlesen
const {
  products = [],
  variant = currentPath.includes("/dashboard") ? "upsell" : "teaser",
  lang = detectedLang,
  compact = false, // ðŸ†• Steuert kompaktes Layout (fÃ¼r Login)
} = Astro.props;

// Mehrsprachige Produktsets
const productSets = {
  teaser: {
    de: [
      {
        title: "SmartProfile",
        label: "Bald verfÃ¼gbar",
        text: "Erstelle Dein professionelles Profil mit nur wenigen Klicks â€“ perfekt fÃ¼r Freelancer, Coaches und Unternehmer.",
        gradient: "from-[#4E6BFF] to-[#657AFF]",
        glow: "hover:shadow-[0_0_30px_#4E6BFF80]",
        action: null,
      },
      {
        title: "SmartPage",
        label: "Bald verfÃ¼gbar",
        text: "Erstelle beeindruckende, konversionsoptimierte Seiten in Minuten â€“ einfach, schnell und professionell.",
        gradient: "from-[#F5B400] to-[#E47E00]",
        glow: "hover:shadow-[0_0_30px_#F5B40080]",
        action: null,
      },
      {
        title: "SmartDomain",
        label: "Bald verfÃ¼gbar",
        text: "Sichere Dir Deine eigene Domain direkt in SmartPages â€“ professionell, einfach und DSGVO-konform.",
        gradient: "from-[#8B5CFF] to-[#A076FF]",
        glow: "hover:shadow-[0_0_30px_#8B5CFF80]",
        action: null,
      },
    ],
    en: [
      {
        title: "SmartProfile",
        label: "Coming soon",
        text: "Create your professional profile in just a few clicks â€“ ideal for freelancers, coaches, and entrepreneurs.",
        gradient: "from-[#4E6BFF] to-[#657AFF]",
        glow: "hover:shadow-[0_0_30px_#4E6BFF80]",
        action: null,
      },
      {
        title: "SmartPage",
        label: "Coming soon",
        text: "Build stunning, conversion-optimized pages in minutes â€“ simple, fast, and professional.",
        gradient: "from-[#F5B400] to-[#E47E00]",
        glow: "hover:shadow-[0_0_30px_#F5B40080]",
        action: null,
      },
      {
        title: "SmartDomain",
        label: "Coming soon",
        text: "Secure your own domain directly within SmartPages â€“ professional, easy, and GDPR-compliant.",
        gradient: "from-[#8B5CFF] to-[#A076FF]",
        glow: "hover:shadow-[0_0_30px_#8B5CFF80]",
        action: null,
      },
    ],
  },

  upsell: {
    de: [
      {
        title: "SmartProfile",
        label: "",
        text: "Schalte Premium-Funktionen fÃ¼r Dein Profil frei â€“ mehr Reichweite, Branding und Automatisierung.",
        gradient: "from-[#4E6BFF] to-[#657AFF]",
        glow: "hover:shadow-[0_0_30px_#4E6BFF80]",
        action: "/paywall?product=profile",
      },
      {
        title: "SmartPage",
        label: "",
        text: "Erstelle unbegrenzt Seiten mit erweiterten Templates, KI-Texten und Conversion-Boostern.",
        gradient: "from-[#F5B400] to-[#E47E00]",
        glow: "hover:shadow-[0_0_30px_#F5B40080]",
        action: "/paywall?product=page",
      },
      {
        title: "SmartDomain",
        label: "",
        text: "Profitiere von eigener Domain & SSL-Zertifikat fÃ¼r Dein SmartPages-Setup.",
        gradient: "from-[#8B5CFF] to-[#A076FF]",
        glow: "hover:shadow-[0_0_30px_#8B5CFF80]",
        action: "/paywall?product=domain",
      },
    ],
    en: [
      {
        title: "SmartProfile",
        label: "",
        text: "Unlock premium features for your profile â€“ more reach, branding, and automation.",
        gradient: "from-[#4E6BFF] to-[#657AFF]",
        glow: "hover:shadow-[0_0_30px_#4E6BFF80]",
        action: "/paywall?product=profile",
      },
      {
        title: "SmartPage",
        label: "",
        text: "Create unlimited pages with advanced templates, AI-powered content, and conversion boosters.",
        gradient: "from-[#F5B400] to-[#E47E00]",
        glow: "hover:shadow-[0_0_30px_#F5B40080]",
        action: "/paywall?product=page",
      },
      {
        title: "SmartDomain",
        label: "",
        text: "Benefit from your own domain & SSL certificate for your SmartPages setup.",
        gradient: "from-[#8B5CFF] to-[#A076FF]",
        glow: "hover:shadow-[0_0_30px_#8B5CFF80]",
        action: "/paywall?product=domain",
      },
    ],
  },
};

// Produktliste auswÃ¤hlen
const items = products.length ? products : productSets[variant][lang];
---

<section
  class={`${
    compact
       ? "w-full mx-auto grid grid-cols-1 md:grid-cols-3 gap-5 items-stretch justify-items-center animate-fadeIn"
      : "max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6 px-4 md:px-6 py-4 md:py-5 items-stretch justify-items-center animate-fadeIn"
  }`}
>
  {items.map((p) => (
    <div class="w-full flex justify-center">
      <ProductCard
        title={p.title}
        label={p.label}
        text={p.text}
        gradient={p.gradient}
        glow={p.glow}
        action={p.action}
      />
    </div>
  ))}
</section>

<style>
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(15px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fadeIn {
    animation: fadeIn 0.6s ease-out both;
  }

  section {
    align-items: stretch;
  }

  @media (max-width: 768px) {
    section {
      gap: 1rem;
      padding: 0.75rem 1rem;
    }
  }
</style>

