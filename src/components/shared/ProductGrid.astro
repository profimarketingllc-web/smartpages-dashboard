---
/**
 * ProductGrid.astro â€“ FIXED DESIGN VERSION
 * ---------------------------------------
 * âœ” Design fix (Farben / Glow / Gradient)
 * âœ” Nur Text & Action von auÃŸen
 * âœ” Ganze Kachel klickbar
 * âœ” Immer 3 Produkte in einer Reihe
 */

import ProductCard from "./ProductCard.astro";

const {
  products = [],
  lang = "de",
  compact = false,
} = Astro.props;

/* -------------------------------------------------- */
/* ðŸŽ¨ FESTES PRODUKT-DESIGN (NICHT KONFIGURIERBAR)    */
/* -------------------------------------------------- */
const DESIGN = {
  smartprofile: {
    gradient: "from-[#4E6BFF] to-[#657AFF]",
    glow: "hover:shadow-[0_0_30px_#4E6BFF80]",
  },
  smartpage: {
    gradient: "from-[#F5B400] to-[#E47E00]",
    glow: "hover:shadow-[0_0_30px_#F5B40080]",
  },
  smartdomain: {
    gradient: "from-[#8B5CFF] to-[#A076FF]",
    glow: "hover:shadow-[0_0_30px_#8B5CFF80]",
  },
};

/* -------------------------------------------------- */
/* ðŸ§  PRODUKTE NORMALISIEREN                          */
/* -------------------------------------------------- */
const items = products.map((p) => {
  const design = DESIGN[p.key];
  if (!design) {
    throw new Error(`Unknown product key: ${p.key}`);
  }

  return {
    ...p,
    ...design,
    label: "UPGRADE",
  };
});
---

<section
  class={`${
    compact
      ? "grid grid-cols-1 md:grid-cols-3 gap-6"
      : "max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6 px-4 py-6"
  }`}
>
  {items.map((p) => (
    <a
      href={p.action}
      class="block w-full focus:outline-none"
      aria-label={p.title}
    >
      <ProductCard
        title={p.title}
        label={p.label}
        text={p.text}
        gradient={p.gradient}
        glow={p.glow}
      />
    </a>
  ))}
</section>
