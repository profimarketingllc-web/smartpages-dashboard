---
/**
 * ProductGrid.astro ‚Äì Premium Harmony Edition
 * -------------------------------------------
 * ‚úì Gleichm√§√üige H√∂he der ProductCards
 * ‚úì Sanftes Fade-In beim Laden
 * ‚úì Zentrierte Darstellung (in DashboardCard)
 * ‚úì Optimiertes Padding f√ºr "Above the Fold"
 */

import ProductCard from "./ProductCard.astro";

// Aktuelle URL analysieren
const currentPath = Astro.url.pathname.toLowerCase();

// Automatische Variante bestimmen
let detectedVariant = "teaser";
if (currentPath.includes("/dashboard")) detectedVariant = "upsell";
else if (currentPath.includes("/login") || currentPath.includes("/signin")) detectedVariant = "teaser";

// Props
const {
  products = [],
  variant = detectedVariant,
} = Astro.props;

// Produktsets
const productSets = {
  teaser: [
    {
      title: "SmartProfile",
      label: "Bald verf√ºgbar",
      text: "Erstelle Dein professionelles Profil mit nur wenigen Klicks ‚Äì perfekt f√ºr Freelancer, Coaches und Unternehmer.",
      gradient: "from-[#4E6BFF] to-[#657AFF]",
      glow: "hover:shadow-[0_0_30px_#4E6BFF80]",
      action: null,
    },
    {
      title: "SmartPage",
      label: "Bald verf√ºgbar",
      text: "Erstelle beeindruckende, konversionsoptimierte Seiten in Minuten ‚Äì einfach, schnell und professionell.",
      gradient: "from-[#F5B400] to-[#E47E00]",
      glow: "hover:shadow-[0_0_30px_#F5B40080]",
      action: null,
    },
    {
      title: "SmartDomain",
      label: "Bald verf√ºgbar",
      text: "Sichere Dir Deine eigene Domain direkt in SmartPages ‚Äì professionell, einfach und DSGVO-konform.",
      gradient: "from-[#8B5CFF] to-[#A076FF]",
      glow: "hover:shadow-[0_0_30px_#8B5CFF80]",
      action: null,
    },
  ],
  upsell: [
    {
      title: "SmartProfile",
      label: "",
      text: "Schalte Premium-Funktionen f√ºr Dein Profil frei ‚Äì mehr Reichweite, Branding und Automatisierung.",
      gradient: "from-[#4E6BFF] to-[#657AFF]",
      glow: "hover:shadow-[0_0_30px_#4E6BFF80]",
      action: "/paywall?product=profile",
    },
    {
      title: "SmartPage",
      label: "",
      text: "Erstelle unbegrenzt Seiten mit erweiterten Templates, KI-Texten und Conversion-Boostern.",
      gradient: "from-[#F5B400] to-[#E47E00]",
      glow: "hover:shadow-[0_0_30px_#F5B40080]",
      action: "/paywall?product=page",
    },
    {
      title: "SmartDomain",
      label: "",
      text: "Profitiere von eigener Domain & SSL-Zertifikat f√ºr Dein SmartPages-Setup.",
      gradient: "from-[#8B5CFF] to-[#A076FF]",
      glow: "hover:shadow-[0_0_30px_#8B5CFF80]",
      action: "/paywall?product=domain",
    },
  ],
};

const items = products.length ? products : productSets[variant];
---

<section
  class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6 px-4 md:px-6 py-4 md:py-5 
         items-stretch justify-items-center animate-fadeIn"
>
  {items.map((p) => (
    <div class="w-full flex justify-center">
      <ProductCard
        title={p.title}
        label={p.label}
        text={p.text}
        gradient={p.gradient}
        glow={p.glow}
        action={p.action}
      />
    </div>
  ))}
</section>

<style>
  /* ü™∂ Sanftes Fade-In beim Laden */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(15px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fadeIn {
    animation: fadeIn 0.6s ease-out both;
  }

  /* üß© Einheitliche H√∂he erzwingen */
  section {
    align-items: stretch;
  }

  section > div {
    display: flex;
  }

  /* üìè Leicht kompakter f√ºr bessere Above-the-Fold-Darstellung */
  section {
    padding-top: 0.5rem;
    padding-bottom: 0.75rem;
  }

  @media (max-width: 768px) {
    section {
      gap: 1rem;
      padding: 0.75rem 1rem;
    }
  }
</style>
