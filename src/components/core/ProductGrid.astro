---
/**
 * ProductGrid.astro
 * -----------------
 * Rendert ein flexibles Grid mit Produktkarten.
 * Automatische Varianten-Steuerung:
 *  - "teaser" auf Login-Seiten
 *  - "upsell" auf Dashboard-Seiten
 */

import ProductCard from "./ProductCard.astro";

// Aktuelle URL analysieren
const currentPath = Astro.url.pathname.toLowerCase();

// Automatische Variante anhand der URL
let detectedVariant = "teaser";
if (currentPath.includes("/dashboard")) detectedVariant = "upsell";
else if (currentPath.includes("/login") || currentPath.includes("/signin")) detectedVariant = "teaser";

// Props: manuelle Variante Ã¼berschreibt Automatik (optional)
const {
  products = [],
  variant = detectedVariant,
} = Astro.props;

// âœ… Inhalte je nach Variante
const productSets = {
  teaser: [
    {
      title: "SmartProfile",
      label: "Neu ðŸš€",
      text: "Erstelle Dein professionelles Profil mit nur wenigen Klicks â€“ perfekt fÃ¼r Freelancer, Coaches und Unternehmer.",
      gradient: "from-[#4E6BFF] to-[#657AFF]",
      glow: "hover:shadow-[0_0_30px_#4E6BFF80]",
      action: null,
    },
    {
      title: "SmartPage",
      label: "",
      text: "Erstelle beeindruckende, konversionsoptimierte Seiten in Minuten â€“ einfach, schnell und professionell.",
      gradient: "from-[#F5B400] to-[#E47E00]",
      glow: "hover:shadow-[0_0_30px_#F5B40080]",
      action: null,
    },
    {
      title: "SmartDomain",
      label: "",
      text: "Sichere Dir Deine eigene Domain direkt in SmartPages â€“ professionell, einfach und DSGVO-konform.",
      gradient: "from-[#8B5CFF] to-[#A076FF]",
      glow: "hover:shadow-[0_0_30px_#8B5CFF80]",
      action: null,
    },
  ],
  upsell: [
    {
      title: "SmartProfile",
      label: "",
      text: "Schalte Premium-Funktionen fÃ¼r Dein Profil frei â€“ mehr Reichweite, Branding und Automatisierung.",
      gradient: "from-[#4E6BFF] to-[#657AFF]",
      glow: "hover:shadow-[0_0_30px_#4E6BFF80]",
      action: "/paywall?product=profile",
    },
    {
      title: "SmartPage",
      label: "",
      text: "Erstelle unbegrenzt Seiten mit erweiterten Templates, KI-Texten und Conversion-Boostern.",
      gradient: "from-[#F5B400] to-[#E47E00]",
      glow: "hover:shadow-[0_0_30px_#F5B40080]",
      action: "/paywall?product=page",
    },
    {
      title: "SmartDomain",
      label: "",
      text: "Profitiere von eigener Domain & SSL-Zertifikat fÃ¼r Dein SmartPages-Setup.",
      gradient: "from-[#8B5CFF] to-[#A076FF]",
      glow: "hover:shadow-[0_0_30px_#8B5CFF80]",
      action: "/paywall?product=domain",
    },
  ],
};

// âœ… Fallback: Props > Automatik > Default
const items = products.length ? products : productSets[variant];
---

<section class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6 px-6 mb-10">
  {items.map((p) => (
    <ProductCard
      title={p.title}
      label={p.label}
      text={p.text}
      gradient={p.gradient}
      glow={p.glow}
      action={p.action}
    />
  ))}
</section>
