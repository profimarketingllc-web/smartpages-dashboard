---
/**
 * SystemMessage.astro â€“ Final Production Edition
 * ----------------------------------------------
 * âœ“ SprachfÃ¤hig (DE/EN)
 * âœ“ Farb- & Gradient-Logik pro Typ (info, success, warning, error)
 * âœ“ Dauerhaft sichtbar â€“ keine Auto-Ausblendung
 * âœ“ Responsive Logik:
 *     - Auf groÃŸen Bildschirmen rechtsbÃ¼ndig neben den Solid-Cards
 *     - Auf mittleren & kleinen Bildschirmen springt sie Ã¼ber die Cards
 * âœ“ Voll kompatibel mit Dashboard-Grid (kein Template-Eingriff nÃ¶tig)
 */

const {
  lang = Astro.url.pathname.toLowerCase().includes("/en/") ? "en" : "de",
  message = null,
  type = "info", // info | success | warning | error
} = Astro.props;

// ðŸŒ Standardtexte (Fallback)
const defaultMessages = {
  de: {
    info: "Willkommen im SmartCenter ðŸ‘‹",
    success: "Alles lÃ¤uft reibungslos â€“ Deine Daten sind aktuell.",
    warning: "Achtung: Einige Informationen werden gerade synchronisiert.",
    error: "Ein Fehler ist aufgetreten. Bitte lade die Seite neu.",
  },
  en: {
    info: "Welcome to your SmartCenter ðŸ‘‹",
    success: "Everything is running smoothly â€“ your data is up to date.",
    warning: "Note: Some information is currently syncing.",
    error: "An error occurred. Please reload the page.",
  },
};

// ðŸ§  Text bestimmen (API > Fallback)
const finalMessage = message || defaultMessages[lang][type];

// ðŸŽ¨ Styles nach Nachrichtentyp
const styleMap = {
  info: {
    gradient: "from-[#4E6BFF] to-[#657AFF]",
    glow: "hover:shadow-[0_0_20px_rgba(78,107,255,0.4)]",
  },
  success: {
    gradient: "from-[#3CB371] to-[#2E8B57]",
    glow: "hover:shadow-[0_0_20px_rgba(60,179,113,0.4)]",
  },
  warning: {
    gradient: "from-[#F5B400] to-[#E47E00]",
    glow: "hover:shadow-[0_0_20px_rgba(245,180,0,0.4)]",
  },
  error: {
    gradient: "from-[#E14D4D] to-[#B83535]",
    glow: "hover:shadow-[0_0_20px_rgba(225,77,77,0.4)]",
  },
}[type];
---

<div class={`system-message-container relative flex flex-col justify-center`}>
  <div
    class={`relative flex flex-col justify-center p-5 rounded-2xl shadow-lg border border-white/20 bg-gradient-to-br ${styleMap.gradient} text-white transition-all duration-300 ${styleMap.glow}`}
  >
    <p class="text-sm leading-relaxed text-white/90 text-center font-medium">
      {finalMessage}
    </p>
  </div>
</div>

<style>
  /* ðŸ§± Grundlayout */
  .system-message {
    max-width: 420px;
    margin-left: auto;
    margin-right: 0;
    position: relative;
  }

/* ðŸ§­ Responsive: Message zentrieren bei schmalen Screens */
@media (max-width: 1024px) {
  .system-message-container {
    display: flex;
    justify-content: center !important;
    align-items: center !important;
    margin: 1rem auto 0 auto !important;
    width: 100%;
  }
}

  /* ðŸ“± Responsive: Auf kleineren Bildschirmen oberhalb der Solid-Cards */
  @media (max-width: 1024px) {
    .system-message {
      margin: 0 auto 1rem auto;
      display: flex;
      justify-content: center;
      max-width: 90%;
    }
  }
</style>
