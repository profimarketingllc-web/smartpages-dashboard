---
import PageLayout from "~/layouts/PageLayout.astro";
import ProductGrid from "~/components/shared/ProductGrid.astro";
import { productGridI18n } from "~/utils/i18n/ProductGrid";
import { t } from "~/utils/i18n/i18n";

const lang = Astro.props.lang ?? "de";
---

<PageLayout lang={lang} page="login" sidebar={false} header={true}>

  <div id="login-root" data-lang={lang}>

    <!-- ================= HERO + LOGIN ================= -->
    <section class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">

      <!-- HERO -->
      <div class="dashboard-card bg-white rounded-xl shadow p-6">
        <h2 class="text-xl font-bold mb-2">
          {t(lang, "login", "hero", "title")}
        </h2>
        <p class="text-sm text-gray-600 leading-snug">
          {t(lang, "login", "hero", "text")}
        </p>
      </div>

      <!-- LOGIN CARD -->
      <div class="dashboard-card bg-white rounded-xl shadow p-6">
        <div class="grid gap-3">

          <label class="text-sm font-medium">
            {t(lang, "login", "form", "firstName")}
            <span class="text-red-500">*</span>
          </label>
          <input id="firstName" class="h-9 px-3 rounded border bg-gray-100 text-sm" />

          <label class="text-sm font-medium">
            {t(lang, "login", "form", "lastName")}
          </label>
          <input id="lastName" class="h-9 px-3 rounded border bg-gray-100 text-sm" />

          <label class="text-sm font-medium">
            {t(lang, "login", "form", "email")}
            <span class="text-red-500">*</span>
          </label>
          <input id="email" type="email" class="h-9 px-3 rounded border bg-gray-100 text-sm" />

          <!-- Business toggle -->
          <div
            id="businessToggle"
            class="mt-2 cursor-pointer rounded-lg border border-dashed text-sm text-gray-600 p-3 text-center hover:bg-gray-50"
          >
            {t(lang, "login", "form", "businessToggle")}
          </div>

          <!-- Company -->
          <div id="companyField" class="hidden">
            <label class="text-sm font-medium mt-2 block">
              {t(lang, "login", "form", "company")}
            </label>
            <input id="company" class="h-9 px-3 rounded border bg-gray-100 text-sm w-full" />
          </div>

          <!-- Button -->
          <button
            id="sendBtn"
            disabled
            class="mt-4 mx-auto w-3/4 h-10 rounded-lg font-semibold text-white bg-[#F5B400] disabled:opacity-50"
          >
            {t(lang, "login", "form", "button")}
          </button>

          <p id="status" class="hidden text-xs text-center text-gray-500 mt-2"></p>

          <p class="text-xs text-gray-500 text-center mt-2 leading-snug">
            {t(lang, "login", "form", "hint")}
          </p>

        </div>
      </div>
    </section>

    <!-- ================= PRODUCTS ================= -->
    <section class="mt-10">
      <ProductGrid
        lang={lang}
        upsell={productGridI18n[lang].teaser}
      />
    </section>

  </div>
</PageLayout>

<!-- ================= SUCCESS MODAL ================= -->
<div
  id="successModal"
  style="display:none"
  class="fixed inset-0 z-50 items-center justify-center bg-black/40"
>
  <div class="bg-white rounded-xl shadow-lg p-6 max-w-sm w-full text-center">
    <h3 class="text-lg font-semibold mb-2">
      Magic-Link gesendet
    </h3>
    <p class="text-sm text-gray-600 mb-4"
