---
import PageLayout from "~/layouts/PageLayout.astro";
import DashboardCardWide from "~/components/core/DashboardCardWide.astro";
import CustomerCard from "~/components/core/CustomerCard.jsx";
import ImprintCard from "~/components/core/ImprintCard.jsx";
import ProductCardGrid from "~/components/core/ProductCardGrid.astro";
import { createSignal, onMount } from "solid-js";

const [showAuthPopup, setShowAuthPopup] = createSignal(true);

// Popup verschwindet nach 2 Sekunden oder sobald Auth abgeschlossen ist
onMount(() => {
  const timer = setTimeout(() => setShowAuthPopup(false), 2000);
  return () => clearTimeout(timer);
});
---

<PageLayout title="Dashboard">
  <!-- ðŸ” Popup Anmeldung -->
  {showAuthPopup() && (
    <div
      class="fixed top-28 left-1/2 transform -translate-x-1/2 z-50
             bg-[#E57373] text-white text-center px-6 py-3 rounded-2xl shadow-md
             border border-red-400/50 text-sm font-semibold w-[90%] max-w-md">
      PrÃ¼fe Anmeldung...
    </div>
  )}

  <!-- ðŸ§­ Benutzerinformationen -->
  <section
    class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 mb-10 mt-20 px-4"
  >
    <DashboardCardWide>
      <CustomerCard client:only="solid" />
    </DashboardCardWide>

    <DashboardCardWide>
      <ImprintCard client:only="solid" />
    </DashboardCardWide>
  </section>

  <!-- ðŸ§© ProduktÃ¼bersicht -->
  <DashboardCardWide>
    <ProductCardGrid
      products={[
        {
          title: "SmartProfile",
          label: "",
          text: "Erstelle Dein professionelles Profil mit nur wenigen Klicks â€“ perfekt fÃ¼r Freelancer, Coaches und Unternehmer.",
          gradient: "from-[#4E6BFF] to-[#657AFF]",
        },
        {
          title: "SmartPage",
          label: "",
          text: "Erstelle beeindruckende, konversionsoptimierte Seiten in Minuten â€“ einfach, schnell und professionell.",
          gradient: "from-[#F5B400] to-[#E47E00]",
        },
        {
          title: "SmartDomain",
          label: "",
          text: "Sichere Dir Deine eigene Domain direkt in SmartPages â€“ professionell, einfach und DSGVO-konform.",
          gradient: "from-[#8B5CFF] to-[#A076FF]",
        },
      ]}
    />
  </DashboardCardWide>

  <!-- ðŸ’¬ Feedback -->
  <div class="text-center mt-10 mb-6 text-gray-600 text-sm">
    ðŸ“¬ Dein Feedback hilft uns, SmartPages zu verbessern â€”
    <a
      href="mailto:support@smartpages.online"
      class="text-[#4F6EF7] underline hover:text-[#2D46B9]"
    >
      support@smartpages.online
    </a>
  </div>

  <!-- âš™ï¸ Footer -->
  <footer
    class="text-center text-sm text-gray-500 py-4 border-t border-gray-200 bg-white/80 backdrop-blur-sm"
  >
    Â© {new Date().getFullYear()} SmartPages Â· Gehostet in Europa Â· DSGVO-konform
  </footer>
</PageLayout>
