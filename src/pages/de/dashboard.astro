---
import PageLayout from "~/layouts/PageLayout.astro";
import DashboardCardWide from "~/components/core/DashboardCardWide.astro";
import CustomerCard from "~/components/core/CustomerCard.jsx";
import ImprintCard from "~/components/core/ImprintCard.jsx";
import ProductGrid from "~/components/core/ProductGrid.astro";
import SystemMessage from "~/components/core/SystemMessage.astro";

// Beispiel-Systemnachricht
const systemNotice = {
  message: "Dein Testzeitraum endet in 3 Tagen. Jetzt upgraden und alle Funktionen behalten!",
  type: "warning",
};
---

<PageLayout title="Dashboard â€“ SmartPages" sidebar={true} header={true}>

<!-- ðŸ’  Hauptinhalt als 2-Spalten-Grid -->
<main
  class="grid grid-cols-1 lg:grid-cols-[minmax(0,1fr)_320px] gap-6 w-full max-w-[1400px] mx-auto px-4 sm:px-6 md:px-10 mt-4 mb-20 transition-all duration-300"
>
  <!-- ðŸ”¹ Linke Spalte: DashboardCards -->
  <div class="flex flex-col gap-8 items-center w-full mx-auto mt-0">
    <!-- ðŸ§­ Kundendaten -->
    <DashboardCardWide>
      <CustomerCard client:load />
    </DashboardCardWide>

    <!-- ðŸ¢ Impressumsdaten -->
    <DashboardCardWide>
      <ImprintCard client:load />
    </DashboardCardWide>

    <!-- ðŸ§± Produkte -->
    <DashboardCardWide>
      <ProductGrid />
    </DashboardCardWide>

    <!-- ðŸ’¬ Feedback -->
    <DashboardCardWide>
      <section class="text-center text-gray-700">
        <h3 class="font-semibold text-lg mb-2">
          Dein Feedback hilft uns, SmartPages zu verbessern
        </h3>
        <p class="text-gray-600 text-sm mb-4">
          Teile Ideen, VorschlÃ¤ge oder Fehler direkt mit unserem Team â€“ 
          wir entwickeln SmartPages aktiv weiter auf Basis deines Feedbacks.
        </p>
        <a
          href="/feedback"
          class="inline-block bg-[#C94C43] hover:bg-[#B33D35] text-white px-6 py-2 rounded-xl shadow transition-all duration-200"
        >
          Feedback senden
        </a>
      </section>
    </DashboardCardWide>
  </div>

  <!-- ðŸ”¸ Rechte Spalte: SystemMessage -->
  <aside class="hidden lg:flex flex-col items-start justify-start mt-2">
    <SystemMessage message={systemNotice.message} type={systemNotice.type} />
  </aside>
</main>

<style>
  /* =======================================
     ðŸŽ¯ SMARTPAGES DASHBOARD â€“ FINAL SPACING FIX
  ======================================= */

  main {
    transition: all 0.3s ease-in-out;
    margin-top: 1.2rem; /* ðŸ”§ Minimaler Abstand unter Header (~1 cm) */
  }

  /* ðŸ§­ Cards */
  main > div > * {
    width: 100%;
    max-width: 1150px;
    transition: all 0.3s ease-in-out;
  }

  /* ðŸ”¸ Rechte Spalte */
  aside .SystemMessage {
    width: 100%;
    max-width: 320px;
  }

  /* ðŸ”¹ Mittelzentrierung bei kleineren Displays */
  @media (max-width: 1280px) {
    main {
      justify-content: center;
      padding: 0 1.5rem;
      margin-top: 1rem; /* Weniger Platz bei kleineren Screens */
    }
    main > div {
      align-items: center;
    }
    main > div > * {
      max-width: 1000px;
    }
  }

  @media (max-width: 1024px) {
    main {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1.6rem;
      margin-top: 0.8rem;
    }
    aside {
      display: flex !important;
      justify-content: center;
      width: 100%;
      margin-top: 0.6rem;
    }
    aside .SystemMessage {
      max-width: 95%;
      text-align: center;
    }
  }

  @media (max-width: 768px) {
    main {
      gap: 1.2rem;
      margin-top: 0.6rem; /* Sehr kompakt auf Mobile */
    }
  }
</style>
</PageLayout>
