---
import PageLayout from "~/layouts/PageLayout.astro";
import DashboardCardWide from "~/components/astro/DashboardCardWide.astro";
import CustomerCard from "~/components/solid/CustomerCard";
import ImprintCard from "~/components/solid/ImprintCard";
import ProductCardGrid from "~/components/astro/ProductCardGrid.astro";

const products = [
  {
    title: "SmartPage",
    label: "Deine persÃ¶nliche Landingpage",
    text: "Schnell, einfach, professionell â€” in 10 Minuten online.",
    gradient: "from-[#F5B400] to-[#E47E00]",
  },
  {
    title: "SmartDomain",
    label: "Deine eigene Webadresse",
    text: "Sichere dir deine Wunschdomain und bleibe im GedÃ¤chtnis.",
    gradient: "from-[#8B5CFF] to-[#A076FF]",
  },
  {
    title: "SmartProfile",
    label: "Online-Visitenkarte",
    text: "Mach dein Business sichtbar â€” Ã¼berall und jederzeit.",
    gradient: "from-[#4E6BFF] to-[#657AFF]",
  },
];
---

<PageLayout title="Dashboard" headerOffset="compact">
  <!-- ðŸ”¹ Status-Popup -->
  <div
    id="authStatus"
    class="hidden fixed top-24 left-1/2 -translate-x-1/2 
           bg-[#E53E3E] text-white text-center px-6 py-3 rounded-2xl 
           shadow-lg z-50 w-[300px] font-semibold"
  >
    ðŸ”„ Anmeldung wird geprÃ¼ft ...
  </div>

  <!-- ðŸ”¹ Dashboard-Bereich -->
  <section class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 mb-10">
    <DashboardCardWide>
      <CustomerCard client:only="solid" />
    </DashboardCardWide>

    <DashboardCardWide>
      <ImprintCard client:only="solid" />
    </DashboardCardWide>
  </section>

  <!-- ðŸ”¹ ProduktÃ¼bersicht -->
  <DashboardCardWide>
    <ProductCardGrid products={products} />
  </DashboardCardWide>

  <!-- ðŸ”¹ Feedback-Zeile -->
  <div class="text-center mt-10 mb-6 text-gray-600 text-sm">
    ðŸ“¬ Feedback? Schreib uns an{" "}
    <a href="mailto:support@smartpages.online" class="text-[#4F6EF7] underline hover:text-[#2D46B9]">
      support@smartpages.online
    </a>
  </div>

  <!-- ðŸ”¹ Footer -->
  <footer class="text-center text-sm text-gray-500 py-4 border-t border-gray-200 bg-white/80 backdrop-blur-sm">
    Â© {new Date().getFullYear()} SmartPages Â· Hosted in Europe Â· DSGVO-konform
  </footer>

  <script>
    // ðŸ” Popup-Logik mit Auth-Check
    const popup = document.getElementById("authStatus");

    function showAuthPopup() {
      popup.classList.remove("hidden");
      let authComplete = false;

      // Simulation: Warte auf Auth oder Timeout
      setTimeout(() => {
        if (!authComplete) hideAuthPopup();
      }, 2000);

      // Beispiel: hier kÃ¶nnte ein echter Check stehen
      window.addEventListener("auth:done", () => {
        authComplete = true;
        hideAuthPopup();
      });
    }

    function hideAuthPopup() {
      popup.classList.add("hidden");
    }

    // Direkt beim Seitenstart anzeigen
    showAuthPopup();
  </script>
</PageLayout>
