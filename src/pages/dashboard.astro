export const prerender = false;

import PageLayout from "~/layouts/PageLayout.astro";
import DashboardCardWide from "~/components/shared/DashboardCardWide.astro";
import CustomerCard from "~/components/pages/dashboard/solid/CustomerCard.jsx";
import ImprintCard from "~/components/pages/dashboard/solid/ImprintCard.jsx";
import PrivacyCard from "~/components/pages/dashboard/solid/PrivacyCard.jsx";
import ProductGrid from "~/components/shared/ProductGrid.astro";
import SystemMessage from "~/components/pages/dashboard/astro/SystemMessage.astro";
import EditCustomerModal from "~/components/pages/dashboard/solid/EditCustomerModal.jsx";
import EditImprintModal from "~/components/pages/dashboard/solid/EditImprintModal.jsx";
import EditPrivacyModal from "~/components/pages/dashboard/solid/EditPrivacyModal.jsx";

import { t } from "~/utils/i18n/i18n";

// ‚úÖ Sprache aus Middleware
const lang = Astro.locals?.language || "de";

// üîê Session Check
const cookie = Astro.request.headers.get("cookie") || "";
if (!cookie.includes("session=")) {
  return Astro.redirect(`/${lang}/login`);
}

const user = Astro.locals?.user || null;

/* ================================
   DASHBOARD UPSELL PRODUKTE
   ================================ */
const upsellProducts = [
  {
    title: "SmartProfile",
    label: "",
    text: t(lang, "dashboard", "upsell", "smartprofile", "text"),
    gradient: "from-[#4E6BFF] to-[#657AFF]",
    glow: "hover:shadow-[0_0_30px_#4E6BFF80]",
    action: "/paywall?product=profile",
  },
  {
    title: "SmartPage",
    label: "",
    text: t(lang, "dashboard", "upsell", "smartpage", "text"),
    gradient: "from-[#F5B400] to-[#E47E00]",
    glow: "hover:shadow-[0_0_30px_#F5B40080]",
    action: "/paywall?product=page",
  },
  {
    title: "SmartDomain",
    label: "",
    text: t(lang, "dashboard", "upsell", "smartdomain", "text"),
    gradient: "from-[#8B5CFF] to-[#A076FF]",
    glow: "hover:shadow-[0_0_30px_#8B5CFF80]",
    action: "/paywall?product=domain",
  },
];
