---
import PageLayout from "~/layouts/PageLayout.astro";
import ProductPill from "@/components/shared/ProductPill.astro";
import Card from "@/components/ui/Card.astro";
import ProductForm from "@/components/editor/ProductForm.astro";
import ProductPreview from "@/components/editor/ProductPreview.astro";

import { t, useLang } from "~/utils/i18n/i18n";

// üåç Sprache zentral ermitteln
const lang = useLang();

// üß© Formularschema (voll i18n)
const schema = [
  {
    key: "title",
    label: t(lang, "smartpage", "form", "title"),
    type: "text",
  },
  {
    key: "subtitle",
    label: t(lang, "smartpage", "form", "subtitle"),
    type: "text",
  },
  {
    key: "content",
    label: t(lang, "smartpage", "form", "content"),
    type: "textarea",
    rows: 6,
  },
  {
    key: "cta_label",
    label: t(lang, "smartpage", "form", "cta_label"),
    type: "text",
  },
  {
    key: "cta_url",
    label: t(lang, "smartpage", "form", "cta_url"),
    type: "text",
  },
];

// üîß Beispiel-Daten (sp√§ter API)
const page = {
  title: "Meine erste SmartPage",
  subtitle: "Einfach. Schnell. Online.",
  content:
    "Hier entsteht eine moderne Landingpage ‚Äì ohne Programmierkenntnisse.",
  cta_label: "Mehr erfahren",
  cta_url: "#",
  slug: "start",
};
---

<PageLayout
  title={t(lang, "smartpage", "page", "title")}
  sidebar={true}
  header={true}
>
  <!-- üü° PRODUCT PILL -->
  <ProductPill
    label={t(lang, "smartpage", "pill", "label")}
    color="orange"
  />

  <div class="max-w-4xl mx-auto mt-10 space-y-8">
    <!-- ‚úèÔ∏è EDIT -->
    <Card title={t(lang, "smartpage", "card", "edit")}>
      <ProductForm schema={schema} data={page} />
    </Card>

    <!-- üëÅÔ∏è PREVIEW -->
    <Card title={t(lang, "smartpage", "card", "preview")}>
      <ProductPreview slug={page.slug} />
    </Card>
  </div>
</PageLayout>
