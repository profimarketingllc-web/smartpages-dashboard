---
import "~/styles/global.css";
import SmartHeader from "~/components/shared/SmartHeader.astro";
import SmartSidebar from "~/components/shared/SmartSidebar.astro";
import { t, resolveLang } from "~/utils/i18n/i18n";

const {
  page,
  sidebar = true,
  header = true,
} = Astro.props;

// ğŸŒ EINMAL Sprache bestimmen
const lang = resolveLang();

// ğŸ§  Browser-Titel (Brand â†’ Seite)
const pageTitle = page
  ? `SmartPages â€“ ${t(lang, page, "page", "title")}`
  : "SmartPages";

// ğŸ§© Header-Texte aus SEITEN-i18n
const headerTitle = page
  ? t(lang, page, "header", "title")
  : "SmartPages";

const headerSubtitle = page
  ? t(lang, page, "header", "subtitle")
  : "";
---
<html lang={lang}>
  <head>
    <title>{pageTitle}</title>
    <meta charset="utf-8" />
  </head>

  <body class="min-h-screen flex font-sans bg-[#F7F8FA]">
    {sidebar && <SmartSidebar />}

    <div class={`flex-1 flex flex-col ${sidebar ? "md:ml-64" : ""}`}>
      {header && (
        <SmartHeader
          title={headerTitle}
          subtitle={headerSubtitle}
        />
      )}

      <main class="flex-1 px-4 py-4 max-w-[1500px] w-full mx-auto">
        <slot />
      </main>

      <footer class="text-center text-sm text-gray-500 py-4 border-t bg-white/80">
        Â© SmartPages
      </footer>
    </div>
  </body>
</html>
